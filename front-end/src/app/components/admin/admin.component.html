<div class="admin-wrapper">
  <!-- Admin Header -->
  <header class="admin-header">
    <div class="header-content">
      <div class="header-left">
        <button class="back-btn" (click)="goBack()">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M12.5 15L7.5 10L12.5 5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          <span>Back to Blog</span>
        </button>
        <h1 class="admin-title">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M12 2L2 7L12 12L22 7L12 2Z" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M2 17L12 22L22 17" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M2 12L12 17L22 12" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
          Admin Panel
        </h1>
      </div>
      
      <div class="header-actions">
        <div class="admin-info">
          <div class="admin-avatar">
            <img src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face" alt="Admin">
          </div>
          <span class="admin-name">Admin User</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Navigation Tabs -->
  <nav class="admin-nav">
    <div class="nav-content">
      <button 
        class="nav-tab"
        [class.active]="activeTab === 'dashboard'"
        (click)="switchTab('dashboard')"
      >
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M3 3H8V8H3V3ZM12 3H17V8H12V3ZM12 12H17V17H12V12ZM3 12H8V17H3V12Z" stroke="currentColor" stroke-width="1.5" fill="none"/>
        </svg>
        Dashboard
      </button>
      
      <button 
        class="nav-tab"
        [class.active]="activeTab === 'users'"
        (click)="switchTab('users')"
      >
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M13 7C13 8.65685 11.6569 10 10 10C8.34315 10 7 8.65685 7 7C7 5.34315 8.34315 4 10 4C11.6569 4 13 5.34315 13 7Z" stroke="currentColor" stroke-width="1.5" fill="none"/>
          <path d="M4.5 16C4.5 13.5147 6.51472 11.5 9 11.5H11C13.4853 11.5 15.5 13.5147 15.5 16" stroke="currentColor" stroke-width="1.5" fill="none"/>
        </svg>
        Users ({{ stats.totalUsers }})
      </button>
      
      <button 
        class="nav-tab"
        [class.active]="activeTab === 'posts'"
        (click)="switchTab('posts')"
      >
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M4 5H16M4 9H16M4 13H10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        Posts ({{ stats.totalPosts }})
      </button>
      
      <button 
        class="nav-tab"
        [class.active]="activeTab === 'reports'"
        (click)="switchTab('reports')"
      >
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
          <path d="M10 2L12.09 6.26L17 7L13 10.74L14.18 16.5L10 14.27L5.82 16.5L7 10.74L3 7L7.91 6.26L10 2Z" stroke="currentColor" stroke-width="1.5" fill="none"/>
        </svg>
        Reports 
        <span class="report-badge" *ngIf="stats.pendingReports > 0">{{ stats.pendingReports }}</span>
      </button>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="admin-main">
    <!-- Dashboard Tab -->
    <div class="content-section" *ngIf="activeTab === 'dashboard'">
      <div class="section-header">
        <h2>Dashboard Overview</h2>
        <p>Welcome to the admin panel. Here's an overview of your platform.</p>
      </div>
      
      <!-- Stats Cards -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon users">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M17 21V19C17 17.9391 16.5786 16.9217 15.8284 16.1716C15.0783 15.4214 14.0609 15 13 15H5C3.93913 15 2.92172 15.4214 2.17157 16.1716C1.42143 16.9217 1 17.9391 1 19V21" stroke="currentColor" stroke-width="2" fill="none"/>
              <circle cx="9" cy="7" r="4" stroke="currentColor" stroke-width="2" fill="none"/>
              <path d="M23 21V19C23 18.1645 22.7155 17.3541 22.2094 16.7048C21.7033 16.0555 20.9980 15.6072 20.2 15.4373" stroke="currentColor" stroke-width="2"/>
              <path d="M16 3.1370C16.7986 3.30658 17.5049 3.75452 18.0118 4.40383C18.5187 5.05313 18.8036 5.86353 18.8036 6.69996C18.8036 7.5364 18.5187 8.3468 18.0118 8.99611C17.5049 9.64541 16.7986 10.0934 16 10.2629" stroke="currentColor" stroke-width="2"/>
            </svg>
          </div>
          <div class="stat-info">
            <h3>{{ stats.totalUsers }}</h3>
            <p>Total Users</p>
            <span class="stat-change positive">+{{ stats.activeUsers }} active</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon posts">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" fill="none"/>
              <polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2"/>
            </svg>
          </div>
          <div class="stat-info">
            <h3>{{ stats.totalPosts }}</h3>
            <p>Published Posts</p>
            <span class="stat-change positive">+12 this week</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon reports">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <path d="M10.29 3.86001L1.82001 18C1.64537 18.3024 1.55299 18.6453 1.55201 18.9945C1.55103 19.3437 1.64149 19.6871 1.81441 19.9905C1.98733 20.2939 2.23673 20.5468 2.53771 20.7238C2.83868 20.9007 3.18082 20.9962 3.53001 21H20.47C20.8192 20.9962 21.1613 20.9007 21.4623 20.7238C21.7633 20.5468 22.0127 20.2939 22.1856 19.9905C22.3585 19.6871 22.449 19.3437 22.448 18.9945C22.447 18.6453 22.3546 18.3024 22.18 18L13.71 3.86001C13.5318 3.56611 13.2807 3.32313 12.9812 3.15449C12.6817 2.98585 12.3438 2.89725 12 2.89725C11.6562 2.89725 11.3183 2.98585 11.0188 3.15449C10.7193 3.32313 10.4682 3.56611 10.29 3.86001V3.86001Z" stroke="currentColor" stroke-width="2" fill="none"/>
              <line x1="12" y1="9" x2="12" y2="13" stroke="currentColor" stroke-width="2"/>
              <circle cx="12" cy="17.02" r="0.5" fill="currentColor"/>
            </svg>
          </div>
          <div class="stat-info">
            <h3>{{ stats.pendingReports }}</h3>
            <p>Pending Reports</p>
            <span class="stat-change negative" *ngIf="stats.pendingReports > 0">Needs attention</span>
            <span class="stat-change positive" *ngIf="stats.pendingReports === 0">All resolved</span>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon activity">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
              <polyline points="22,12 18,12 15,21 9,3 6,12 2,12" stroke="currentColor" stroke-width="2" fill="none"/>
            </svg>
          </div>
          <div class="stat-info">
            <h3>{{ stats.activeUsers }}</h3>
            <p>Active Users</p>
            <span class="stat-change positive">+5% this month</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Users Tab -->
    <div class="content-section" *ngIf="activeTab === 'users'">
      <div class="section-header">
        <h2>User Management</h2>
        <p>Manage all registered users, view their activity, and moderate accounts.</p>
      </div>

      <!-- Filters and Search -->
      <div class="filters-bar">
        <div class="search-box">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <circle cx="9" cy="9" r="7" stroke="currentColor" stroke-width="2" fill="none"/>
            <path d="m15 15 4 4" stroke="currentColor" stroke-width="2"/>
          </svg>
          <input 
            type="text" 
            placeholder="Search users..."
            [(ngModel)]="searchTerm"
          >
        </div>
        
        <select [(ngModel)]="selectedFilter" class="filter-select">
          <option value="all">All Status</option>
          <option value="active">Active</option>
          <option value="suspended">Suspended</option>
          <option value="banned">Banned</option>
        </select>
      </div>

      <!-- Users Table -->
      <div class="table-container">
        <div class="table-header">
          <div class="header-cell">User</div>
          <div class="header-cell">Email</div>
          <div class="header-cell">Join Date</div>
          <div class="header-cell">Posts</div>
          <div class="header-cell">Status</div>
          <div class="header-cell">Actions</div>
        </div>

        <div class="table-body">
          <div class="table-row" *ngFor="let user of getFilteredUsers()">
            <div class="user-cell">
              <div class="user-info">
                <div class="user-avatar">
                  <img [src]="user.avatar" [alt]="user.name" (error)="onImageError($event)">
                  <span class="role-badge" *ngIf="user.role === 'admin'">A</span>
                </div>
                <div class="user-details">
                  <h4>{{ user.name }}</h4>
                  <span class="user-id">#{{ user.id }}</span>
                </div>
              </div>
            </div>
            <div class="cell">{{ user.email }}</div>
            <div class="cell">{{ user.joinDate | date:'MMM d, yyyy' }}</div>
            <div class="cell">
              <span class="posts-count">{{ user.postsCount }}</span>
            </div>
            <div class="cell">
              <span class="status-badge" [class]="user.status">{{ user.status | titlecase }}</span>
            </div>
            <div class="cell actions-cell">
              <div class="action-buttons">
                <select 
                  [value]="user.status"
                  (change)="updateUserStatus(user.id, $any($event.target).value)"
                  class="status-select"
                  [disabled]="user.role === 'admin'"
                >
                  <option value="active">Active</option>
                  <option value="suspended">Suspended</option>
                  <option value="banned">Banned</option>
                </select>
                <button 
                  class="delete-btn"
                  (click)="deleteUser(user.id)"
                  [disabled]="user.role === 'admin'"
                  title="Delete User"
                >
                  <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                    <path d="M2 4H14M12.667 4V13.333C12.667 14 12 14.667 11.333 14.667H4.667C4 14.667 3.333 14 3.333 13.333V4M5.333 4V2.667C5.333 2 6 1.333 6.667 1.333H9.333C10 1.333 10.667 2 10.667 2.667V4" stroke="currentColor" stroke-width="1.5"/>
                  </svg>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Posts Tab -->
    <div class="content-section" *ngIf="activeTab === 'posts'">
      <div class="section-header">
        <h2>Post Management</h2>
        <p>Review and moderate all posts, manage content quality and remove inappropriate material.</p>
      </div>

      <!-- Filters and Search -->
      <div class="filters-bar">
        <div class="search-box">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <circle cx="9" cy="9" r="7" stroke="currentColor" stroke-width="2" fill="none"/>
            <path d="m15 15 4 4" stroke="currentColor" stroke-width="2"/>
          </svg>
          <input 
            type="text" 
            placeholder="Search posts..."
            [(ngModel)]="searchTerm"
          >
        </div>
        
        <select [(ngModel)]="selectedFilter" class="filter-select">
          <option value="all">All Status</option>
          <option value="published">Published</option>
          <option value="draft">Draft</option>
          <option value="removed">Removed</option>
        </select>
      </div>

      <!-- Posts Grid -->
      <div class="posts-grid">
        <div class="post-card" *ngFor="let post of getFilteredPosts()">
          <div class="post-image">
            <img [src]="post.image" [alt]="post.title" (error)="onImageError($event)">
            <span class="post-status-badge" [class]="post.status">{{ post.status | titlecase }}</span>
          </div>
          
          <div class="post-content">
            <h3 class="post-title">{{ post.title }}</h3>
            <p class="post-description">{{ post.description }}</p>
            
            <div class="post-meta">
              <div class="post-author">
                <img [src]="post.author.avatar" [alt]="post.author.name" (error)="onImageError($event)">
                <span>{{ post.author.name }}</span>
              </div>
              <span class="post-date">{{ post.publishDate | date:'MMM d' }}</span>
            </div>
            
            <div class="post-stats">
              <div class="stat-item">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path d="M1 8C1 8 3 3 8 3C13 3 15 8 15 8C15 8 13 13 8 13C3 13 1 8 1 8Z" stroke="currentColor" stroke-width="1.5" fill="none"/>
                  <circle cx="8" cy="8" r="2" stroke="currentColor" stroke-width="1.5" fill="none"/>
                </svg>
                <span>{{ post.views }}</span>
              </div>
              <div class="stat-item">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path d="M14 5.33333C14 8.66667 8 14 8 14C8 14 2 8.66667 2 5.33333C2 4.27247 2.42143 3.25505 3.17157 2.50491C3.92172 1.75476 4.93913 1.33333 6 1.33333C6.84 1.33333 7.64 1.68 8.25 2.25C8.86 1.68 9.66 1.33333 10.5 1.33333C11.5609 1.33333 12.5783 1.75476 13.3284 2.50491C14.0786 3.25505 14.5 4.27247 14.5 5.33333Z" stroke="currentColor" stroke-width="1.5" fill="none"/>
                </svg>
                <span>{{ post.likes }}</span>
              </div>
              <div class="stat-item">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path d="M14 10.6667C14 11.0203 13.8595 11.3594 13.6095 11.6095C13.3594 11.8595 13.0203 12 12.6667 12H4L1.33334 14.6667V2.66667C1.33334 2.31305 1.47381 1.97391 1.72386 1.72386C1.97391 1.47381 2.31305 1.33333 2.66667 1.33333H12.6667C13.0203 1.33333 13.3594 1.47381 13.6095 1.72386C13.8595 1.97391 14 2.31305 14 2.66667V10.6667Z" stroke="currentColor" stroke-width="1.5" fill="none"/>
                </svg>
                <span>{{ post.comments }}</span>
              </div>
            </div>
            
            <div class="post-actions">
              <select 
                [value]="post.status"
                (change)="updatePostStatus(post.id, $any($event.target).value)"
                class="status-select"
              >
                <option value="published">Published</option>
                <option value="draft">Draft</option>
                <option value="removed">Removed</option>
              </select>
              <button 
                class="delete-btn"
                (click)="deletePost(post.id)"
                title="Delete Post"
              >
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                  <path d="M2 4H14M12.667 4V13.333C12.667 14 12 14.667 11.333 14.667H4.667C4 14.667 3.333 14 3.333 13.333V4M5.333 4V2.667C5.333 2 6 1.333 6.667 1.333H9.333C10 1.333 10.667 2 10.667 2.667V4" stroke="currentColor" stroke-width="1.5"/>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Reports Tab -->
    <div class="content-section" *ngIf="activeTab === 'reports'">
      <div class="section-header">
        <h2>Reports Management</h2>
        <p>Review user reports and take appropriate action to maintain community standards.</p>
      </div>

      <!-- Filters and Search -->
      <div class="filters-bar">
        <div class="search-box">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <circle cx="9" cy="9" r="7" stroke="currentColor" stroke-width="2" fill="none"/>
            <path d="m15 15 4 4" stroke="currentColor" stroke-width="2"/>
          </svg>
          <input 
            type="text" 
            placeholder="Search reports..."
            [(ngModel)]="searchTerm"
          >
        </div>
        
        <select [(ngModel)]="selectedFilter" class="filter-select">
          <option value="all">All Status</option>
          <option value="pending">Pending</option>
          <option value="resolved">Resolved</option>
          <option value="dismissed">Dismissed</option>
        </select>
      </div>

      <!-- Reports List -->
      <div class="reports-list">
        <div class="report-card" *ngFor="let report of getFilteredReports()">
          <div class="report-header">
            <div class="report-info">
              <div class="report-type">
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" *ngIf="report.type === 'post'">
                  <path d="M4 5H16M4 9H16M4 13H10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                </svg>
                <svg width="20" height="20" viewBox="0 0 20 20" fill="none" *ngIf="report.type === 'user'">
                  <path d="M13 7C13 8.65685 11.6569 10 10 10C8.34315 10 7 8.65685 7 7C7 5.34315 8.34315 4 10 4C11.6569 4 13 5.34315 13 7Z" stroke="currentColor" stroke-width="1.5" fill="none"/>
                  <path d="M4.5 16C4.5 13.5147 6.51472 11.5 9 11.5H11C13.4853 11.5 15.5 13.5147 15.5 16" stroke="currentColor" stroke-width="1.5" fill="none"/>
                </svg>
                <span class="report-type-text">{{ report.type | titlecase }} Report</span>
              </div>
              
              <div class="report-badges">
                <span class="severity-badge" [class]="report.severity">{{ report.severity | titlecase }}</span>
                <span class="status-badge" [class]="report.status">{{ report.status | titlecase }}</span>
              </div>
            </div>
            
            <div class="report-date">
              {{ report.date | date:'MMM d, yyyy' }}
            </div>
          </div>
          
          <div class="report-content">
            <h3 class="report-target">{{ report.targetName }}</h3>
            <div class="report-details">
              <p><strong>Reported by:</strong> {{ report.reporterName }}</p>
              <p><strong>Reason:</strong> {{ report.reason }}</p>
              <p><strong>Description:</strong> {{ report.description }}</p>
            </div>
          </div>
          
          <div class="report-actions" *ngIf="report.status === 'pending'">
            <button 
              class="resolve-btn"
              (click)="resolveReport(report.id, 'resolve')"
            >
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path d="M13.5 4.5L6 12L2.5 8.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
              Resolve & Take Action
            </button>
            <button 
              class="dismiss-btn"
              (click)="resolveReport(report.id, 'dismiss')"
            >
              <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path d="M12 4L4 12M4 4L12 12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
              </svg>
              Dismiss
            </button>
          </div>
          
          <div class="report-resolved" *ngIf="report.status !== 'pending'">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path d="M13.5 4.5L6 12L2.5 8.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span>{{ report.status | titlecase }}</span>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>