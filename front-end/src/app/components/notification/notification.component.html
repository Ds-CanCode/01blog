<div class="notification-popup">
  <!-- Header -->
  <div class="notification-header">
    <div class="header-content">
      <div class="header-left">
        <h2 class="notification-title">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="none">
            <path d="M10 2C10.75 2 11.375 2.625 11.375 3.375V4.125C13.8125 4.5625 15.625 6.75 15.625 9.375V13.125L17.5 15V16.25H2.5V15L4.375 13.125V9.375C4.375 6.75 6.1875 4.5625 8.625 4.125V3.375C8.625 2.625 9.25 2 10 2Z" fill="currentColor"/>
            <path d="M11.875 17.5C11.875 18.5375 11.0375 19.375 10 19.375C8.9625 19.375 8.125 18.5375 8.125 17.5" fill="currentColor"/>
          </svg>
          Notifications
        </h2>
        <div class="unread-badge" *ngIf="getUnreadCount() > 0">
          {{ getUnreadCount() }}
        </div>
      </div>
      
      <div class="header-actions">
        <button 
          class="action-btn" 
          (click)="markAllAsRead()"
          title="Marquer tout comme lu"
          *ngIf="getUnreadCount() > 0"
        >
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
            <path d="M13.5 4.5L6 12L2.5 8.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Content -->
  <div class="notification-content">
    <!-- Loading State -->
    <div class="loading-state" *ngIf="isLoading">
      <div class="loading-spinner"></div>
      <p>Chargement des notifications...</p>
    </div>

    <!-- Notifications List -->
    <div class="notifications-list" *ngIf="!isLoading && notif.length > 0">
      <div 
        class="notification-item"
        *ngFor="let notification of notif"
        [class.unread]="!notification.read"
        (click)="onNotificationClick(notification)"
      >

        <div class="notification-content-item">
          <div class="notification-message">{{ notification.message }}</div>
          <div class="notification-meta">
            <span class="notification-time">{{ getTimeAgo(notification.createdAt) }}</span>
            <div class="notification-status" *ngIf="!notification.read">
              <div class="unread-dot"></div>
            </div>
          </div>
        </div>

        <div class="notification-actions">
          <button 
            class="mark-read-btn"
            *ngIf="!notification.read"
            (click)="markAsRead(notification.id); $event.stopPropagation()"
            title="Marquer comme lu"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none">
              <path d="M10 3L4.5 8.5L2 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
          </button>
        </div>
      </div>
    </div>

    <!-- Empty State -->
    <div class="empty-state" *ngIf="!isLoading && notif.length === 0">
      <div class="empty-icon">
        <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
          <path d="M24 6C25.5 6 26.625 7.125 26.625 8.625V10.125C31.4375 10.9375 35.25 15.25 35.25 20.625V29.25L39 33V35.5H9V33L12.75 29.25V20.625C12.75 15.25 16.5625 10.9375 21.375 10.125V8.625C21.375 7.125 22.5 6 24 6Z" fill="currentColor"/>
          <path d="M28.125 39C28.125 41.0711 26.5711 42.625 24.5 42.625C22.4289 42.625 20.875 41.0711 20.875 39" fill="currentColor"/>
        </svg>
      </div>
      <h3>Aucune notification</h3>
      <p>Vous n'avez aucune notification pour le moment. Les nouvelles notifications appara√Ætront ici.</p>
    </div>
  </div>
</div>